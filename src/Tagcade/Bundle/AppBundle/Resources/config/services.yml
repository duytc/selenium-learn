services:
    yaml:
        class: Symfony\Component\Yaml\Yaml

    tagcade.web_driver_factory:
        class: Tagcade\WebDriverFactory
        arguments: [@logger]

    tagcade.data_source.pulsepoint.task_factory:
        class: Tagcade\DataSource\PulsePoint\TaskFactory
        arguments: [@tagcade.web_driver_factory, @logger]

    tagcade.command.pulsepoint.get_data_command:
        class: Tagcade\Bundle\AppBundle\Command\PulsePoint\GetDataCommand
        arguments: [@tagcade.data_source.pulsepoint.task_factory, %tagcade.default_data_path%, @yaml, @logger]
        tags:
            -  { name: console.command }

    curl:
        class: anlutro\cURL\cURL
        scope: prototype

    tagcade.data_source.admeta.api:
        class: Tagcade\DataSource\AdMeta\Api
        arguments: [@curl, @logger]
        scope: prototype

    tagcade.command.admeta.get_data_command:
        class: Tagcade\Bundle\AppBundle\Command\AdMeta\GetDataCommand
        # notice the = sign at the end of the admeta api service, this disables strict checking
        # this is because we use a different scope
        arguments: [@tagcade.data_source.admeta.api=, %tagcade.default_data_path%, @yaml, @logger]
        tags:
            -  { name: console.command }
